# 1. 서비스 설명
- 탁구 게임 서비스를 만들어 봅시다.
- 탁구 게임의 종류는 2가지가 존재합니다.
    - 단식(SINGLE) : 1대1로 게임을 진행합니다.
    - 복식(DOUBLE) : 2대2로 게임을 진행합니다.
- 유저들은 방을 생성하거나 만들어진 방에 참가해 게임을 진행 할 수 있습니다.
- 방에 참가한 유저들은 RED, BLUE 팀 중 한 개의 팀에 배정받습니다.
- 팀은 변경이 가능합니다.

# 2. 구현 요구사항
- [x] JDK 17을 이용하여 구현한다.
- [ ] Request/Response 에 대해 `과제 구현 안내`에 제공하는 바와 변수명이 일치해야 한다.
- [x] port는 8080으로 설정한다.
- [x] H2 데이터베이스를 이용한다.
- [x] JPA를 활용한다.
- [x] ddl-auto 속성은 create를 사용한다.
- [ ] 각 기능에 대한 단위 테스트를 작성한다.


# 3. 기능 요구사항

## 3-1. 게임 시작
- [ ] 게임은 시작하고 1분 뒤 자동으로 종료된다.
    - [ ] 오차 범위 30초 이내
    - [ ] 종료된 게임의 방 상태는 'FINISH(완료)' 상태로 변경됩니다.
- [ ] 호스트만 게임을 시작할 수 있다.
- [ ] 방이 대기 상태에서만 시작할 수 있다.
- [ ] RED, BLUE 2개의 팀이 존재하고 서로 반/반 정확하게 인원이 나뉘어진 상태에서만 게임을 진행할 수 있습니다.
- [ ] 게임은 방에 인원이 모두 찬 상태에서만 시작 가능합니다.
    - 단식 2명, 복식 4명

## 3-2. 방 참가
- [x] 대기(`WAIT`)상태여야 한다.
- [x] 유저가 활성(`ACTIVE`)상태여야 한다.
- [x] 유저가 현재 참여한 방이 없어야 한다.
- [x] 방이 가득차지 않아야 한다.

## 3-3. 팀 배정
- [x] 방에 참가한 인원에 대한 팀 배정 로직은 다음과 같습니다.
    - [x] 한 쪽 팀에 인원이 모두 찬 경우, 반대팀으로 배정합니다.
    - [x] 양쪽 팀에 모두 자리가 있는 경우, RED팀에 먼저 배정됩니다.

## 3-4. 방 생성
- [x] 방을 생성하는 user의 상태가 활성(`ACTIVE`)이여야 한다.
- [x] 방을 생성하려는 user가 현재 참여한 방이 없어야 한다.
- [x] 방을 초기에 대기 상태(`WAIT`)로 생성된다.

## 3-5. 방 나가기
- [x] 유저가 현재 방에 참여한 상태여야 나갈 수 있다.
- [x] 시작(`PROGRESS`) 이거나 끝난 상태(`FINISH`)라면 나갈 수 없다.
- [x] 호스트가 방을 나가면 방에 있던 모든 사람도 방에서 나가게 된다.
  - [x] 해당 방은 끝난(`FINISH`) 상태가 된다.

## 3-6. 팀 변경 API
- [ ] 유저가 방에 참여한 상태여야 한다.
- [ ] 유저가 현재 속한 팀 기준 반대팀으로 변경된다.RED -> BLUE / BLUE -> RED)
- [ ] 변경하려는 팀의 인원이 해당 방 정원의 절반과 같다면 팀이 변경되지 않고 201을 반환한다.
- [ ] 현재 방의 상태가 대기(`WAIT`)일 때만 팀을 변경할 수 있다.

---

# 4. git 컨벤션

## 4-1. 커밋
- feat: 기능 개발
- docs: 문서 관련 작업
- refactor: 기능 변경 없이 전반적 코드 구조 변경 (ex: 필드 이름 변경 등)
- chore: 파일 내부가 아닌 파일 자체에 대한 변경 (ex: 폴더 이동 / 변경, 파일 이름 변경, 파일 삭제)
- style: 코드 컨벤션 관련 작업
- test: 테스트 코드 관련 작업
- fix: 버그 수정
- config: 외부 라이브러리 관련 추가 및 설정 (`build.gradle`)

## 4-2. 브랜치
| **브랜치명**   | **설명**                             | **예시** | 규칙 |
|------------|------------------------------------| --- | --- |
| master     | 과제 최종 제출을 위한 브랜치                   |  | `삭제 X` |
| develop    | 기능 개발을 위한 브랜치                      |  | `삭제 X` |
| feat/#이슈번호 | develop 브랜치에서 분기되어 이슈 단위 개발을 위한 브랜치 

```text
- master
- develop (default 브랜치)
- feature/#10
- hotfix/#4
```
